!function(t){function e(i){if(o[i])return o[i].exports;var r=o[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";function i(){n();var t=r();l=new s.default("ws://localhost:8080",t)}function r(){var t=document.getElementById("gamecanv");if(!t)throw new Error("Canvas not found.");return t.width=t.clientWidth,t.height=t.clientHeight,t}function n(){var t=document.getElementById("dumbcomment"),e=["- Game of the Year Edition","- Premium Edition","- Gold Edition","- Special Edition","- All DLCs included","- now with 100% more deaths"],o=Math.floor(Math.random()*e.length);t.innerText=e[o]}Object.defineProperty(e,"__esModule",{value:!0});var s=o(1);window.onload=i;var l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),r=o(4),n=o(5),s=function(){function t(t,e){var o=this;this.conn=new WebSocket(t),this.conn.onopen=function(t){return console.log("Connected")},this.conn.onmessage=function(t){return o.handleMsg(t)},this.conn.onclose=function(t){return o.handleDc(t)},this.conn.onerror=function(t){return console.error(t)};var n=new i.Grid(1,1);n.fill(!1),this.grid=n,e.onclick=this.applyTool.bind(this),e.onmousemove=this.moveTool.bind(this);var s=new r.default(n,e);this.renderer=s,this.commands=[],this.registerCommand({id:"cmd-spawn-glider",uitext:"Spawn Glider",onclick:this.cmdSpawnGlider.bind(this)}),this.registerCommand({id:"cmd-randomize-grid",uitext:"Randomize Grid",onclick:this.cmdRandomizeGrid.bind(this)}),this.registerCommand({id:"cmd-clear-grid",uitext:"Clear",onclick:this.cmdClearGrid.bind(this)}),this.draw()}return t.prototype.applyTool=function(t){if(void 0!==this.tool){var e=this.renderer.coordToCell(t.clientX,t.clientY),o=this.tool.apply(e.row,e.col,this.grid);this.sendChanges(o),this.tool=void 0}},t.prototype.moveTool=function(t){var e=this.renderer.coordToCell(t.clientX,t.clientY);console.log("MOUSE."),console.log(e),console.log(t.clientX+" "+t.clientY),console.log(document.getElementById("gamecanv").clientHeight)},t.prototype.sendChanges=function(t){var e={};e.cmd="world.modify",e.payload=t;var o=JSON.stringify(e);this.conn.send(o)},t.prototype.cmdSpawnGlider=function(){this.tool=new n.default},t.prototype.cmdClearGrid=function(){var t={};t.cmd="world.clear";var e=JSON.stringify(t);this.conn.send(e)},t.prototype.cmdRandomizeGrid=function(){console.log("Randomizing");for(var t=[],e=0;e<this.grid.rows;e++)for(var o=0;o<this.grid.cols;o++){var i=Math.random(),r=!0;i>.5&&(r=!r);var n={val:r,row:e,col:o};t.push(n)}this.sendChanges(t)},t.prototype.registerCommand=function(t){this.commands.push(t);var e=document.querySelector("#commands");if(null===e)throw new Error("No command list UI element found.");if(t.html)t.html.onclick=t.onclick,e.appendChild(t.html);else{var o=document.createElement("div");o.onclick=t.onclick,o.classList.add("cmd"),o.innerText=t.uitext,o.id=t.id,e.appendChild(o)}},t.prototype.draw=function(){void 0!==this.grid&&this.renderer.render(),requestAnimationFrame(this.draw.bind(this))},t.prototype.updateGrid=function(t){var e=i.Grid.fromArray(t.grid.cells,t.grid.rows,t.grid.cols);this.renderer.grid=e,this.grid=e},t.prototype.handleMsg=function(t){var e=JSON.parse(t.data);switch(e.action){case"world.update":this.updateGrid(e)}},t.prototype.handleDc=function(t){},t}();e.default=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(3);e.Grid=i.Grid},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){if(void 0==t)throw new Error("Number of rows can't be undefined.");if(void 0==e)throw new Error("Number of cols can't be undefined.");if(t<1)throw new Error("Number of rows must be >1");if(e<1)throw new Error("Number of cols must be >1");this._rows=t,this._cols=e;var o=t*e;this.cells=new Array(o)}return t.prototype.arrayPosition=function(t,e){return t*this.cols+e},t.prototype.getRow=function(t){for(var e=this.sanitizeRow(t),o=[],i=0;i<this.cols;i++){var r=this.arrayPosition(e,i);o.push(this.cells[r])}return o},t.prototype.getCol=function(t){for(var e=this.sanitizeCol(t),o=[],i=0;i<this.rows;i++){var r=this.arrayPosition(i,e);o.push(this.cells[r])}return o},t.prototype.sanitizeRow=function(t){if(!this.isRowValid(t))throw new Error("Row index must be >0 and <"+this.rows+", but was "+t+".");return t<0?t%-this.rows+this.rows:t%this.rows},t.prototype.sanitizeCol=function(t){if(!this.isColValid(t))throw new Error("Col index must be >0 and <"+this.cols+", but was "+t+".");return t<0?t%-this.cols+this.cols:t%this.cols},t.prototype.isRowValid=function(t){return!!this.wrapRows||!(t<0)&&!(t>this.rows)},t.prototype.isColValid=function(t){return!!this.wrapCols||!(t<0)&&!(t>this.cols)},t.prototype.valueAt=function(t,e){var o=this.sanitizeRow(t),i=this.sanitizeCol(e),r=this.arrayPosition(o,i);return this.cells[r]},t.prototype.valueAtOrUndefined=function(t,e){if(this.isRowValid(t)&&this.isColValid(e))return this.valueAt(t,e)},t.prototype.insert=function(t,e,o){var i=this.sanitizeRow(e),r=this.sanitizeCol(o),n=this.arrayPosition(i,r);this.cells[n]=t},t.prototype.getCols=function(){for(var t=[],e=0;e<this.cols;e++)t.push(this.getCol(e));return t},t.prototype.getRows=function(){for(var t=[],e=0;e<this.rows;e++)t.push(this.getRow(e));return t},t.prototype.fill=function(t){for(var e=0;e<this.cells.length;e++)this.cells[e]=t},t.prototype.getNeighbours=function(t,e){var o=(this.sanitizeRow(t),this.sanitizeCol(e),[]);return o.push(this.valueAtOrUndefined(t+1,e-1)),o.push(this.valueAtOrUndefined(t,e-1)),o.push(this.valueAtOrUndefined(t-1,e-1)),o.push(this.valueAtOrUndefined(t+1,e)),o.push(this.valueAtOrUndefined(t-1,e)),o.push(this.valueAtOrUndefined(t+1,e+1)),o.push(this.valueAtOrUndefined(t,e+1)),o.push(this.valueAtOrUndefined(t-1,e+1)),o.filter(function(t){return void 0!==t})},t.prototype.toArray=function(){for(var t=[],e=0,o=this.cells;e<o.length;e++){var i=o[e];t.push(i)}return t},t.fromArray=function(e,o,i){for(var r=new t(o,i),n=0;n<e.length;n++){var s=Math.round(n/o),l=n%o;r.insert(e[n],s,l)}return r},Object.defineProperty(t.prototype,"wrapRows",{get:function(){return this._wrapRows},set:function(t){this._wrapRows=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapCols",{get:function(){return this._wrapCols},set:function(t){this._wrapCols=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),t}();e.Grid=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this._grid=t,this.canv=e,this.ctx=this.canv.getContext("2d"),this.resize()}return t.prototype.render=function(){this.ctx.clearRect(0,0,this.canv.width,this.canv.height),this.ctx.fillStyle="#000";for(var t=0;t<this.grid.rows;t++)for(var e=0;e<this.grid.cols;e++)if(this.grid.valueAt(t,e)){var o=this.cellToCoord(t,e);this.ctx.fillRect(o.x,o.y,this.pxPerCol,this.pxPerRow)}},t.prototype.resize=function(){this.canv.width=this.canv.clientWidth,this.canv.height=this.canv.clientHeight,this.pxPerCol=this.canv.width/this.grid.cols,this.pxPerRow=this.canv.height/this.grid.rows},t.prototype.cellToCoord=function(t,e){return{x:e*this.pxPerCol,y:t*this.pxPerRow}},t.prototype.coordToCell=function(t,e){return{row:Math.floor((e-this.canv.offsetTop)/this.pxPerRow),col:Math.floor((t-this.canv.offsetLeft)/this.pxPerCol)}},Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},set:function(t){this._grid=t,this.resize()},enumerable:!0,configurable:!0}),t}();e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.apply=function(t,e,o){console.log("Applying tool at row: "+t+", col: "+e);var i=[];return i.push({val:!1,row:t,col:e}),i},Object.defineProperty(t.prototype,"name",{get:function(){return"tool.glider"},enumerable:!0,configurable:!0}),t}();e.default=i}]);